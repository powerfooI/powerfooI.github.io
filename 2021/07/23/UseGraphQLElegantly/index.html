<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>å¦‚ä½•ç›¸å¯¹ä¼˜é›…åœ°ä½¿ç”¨ GraphQL - PowerfooI çš„ä¸ªäººåšå®¢</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Somewhere - PowerfooI&#039;s Zone"><meta name="msapplication-TileImage" content="/img/apple-touch-icon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Somewhere - PowerfooI&#039;s Zone"><meta name="apple-mobile-web-app-status-bar-style" content="default"><link rel="apple-touch-icon" sizes="144x144" href="/img/apple-touch-icon.png"><meta name="description" content="å…³äº GraphQLï¼Œå®ƒçš„å®˜ç½‘(éœ€è¦ç§‘å­¦ä¸Šç½‘)æ˜¯è¿™æ ·ä»‹ç»çš„ï¼š  GraphQL æ—¢æ˜¯ä¸€ç§ç”¨äº API çš„æŸ¥è¯¢è¯­è¨€ä¹Ÿæ˜¯ä¸€ä¸ªæ»¡è¶³ä½ æ•°æ®æŸ¥è¯¢çš„è¿è¡Œæ—¶ã€‚ GraphQL å¯¹ä½ çš„ API ä¸­çš„æ•°æ®æä¾›äº†ä¸€å¥—æ˜“äºç†è§£çš„å®Œæ•´æè¿°ï¼Œä½¿å¾—å®¢æˆ·ç«¯èƒ½å¤Ÿå‡†ç¡®åœ°è·å¾—å®ƒéœ€è¦çš„æ•°æ®ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å†—ä½™ï¼Œä¹Ÿè®© API æ›´å®¹æ˜“åœ°éšç€æ—¶é—´æ¨ç§»è€Œæ¼”è¿›ï¼Œè¿˜èƒ½ç”¨äºæ„å»ºå¼ºå¤§çš„å¼€å‘è€…å·¥å…·ã€‚  ä½œä¸º RESTful API çš„ç«å“ï¼ŒGraphQL"><meta property="og:type" content="blog"><meta property="og:title" content="å¦‚ä½•ç›¸å¯¹ä¼˜é›…åœ°ä½¿ç”¨ GraphQL"><meta property="og:url" content="https://powerfooi.github.io/2021/07/23/UseGraphQLElegantly/"><meta property="og:site_name" content="PowerfooI çš„ä¸ªäººåšå®¢"><meta property="og:description" content="å…³äº GraphQLï¼Œå®ƒçš„å®˜ç½‘(éœ€è¦ç§‘å­¦ä¸Šç½‘)æ˜¯è¿™æ ·ä»‹ç»çš„ï¼š  GraphQL æ—¢æ˜¯ä¸€ç§ç”¨äº API çš„æŸ¥è¯¢è¯­è¨€ä¹Ÿæ˜¯ä¸€ä¸ªæ»¡è¶³ä½ æ•°æ®æŸ¥è¯¢çš„è¿è¡Œæ—¶ã€‚ GraphQL å¯¹ä½ çš„ API ä¸­çš„æ•°æ®æä¾›äº†ä¸€å¥—æ˜“äºç†è§£çš„å®Œæ•´æè¿°ï¼Œä½¿å¾—å®¢æˆ·ç«¯èƒ½å¤Ÿå‡†ç¡®åœ°è·å¾—å®ƒéœ€è¦çš„æ•°æ®ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å†—ä½™ï¼Œä¹Ÿè®© API æ›´å®¹æ˜“åœ°éšç€æ—¶é—´æ¨ç§»è€Œæ¼”è¿›ï¼Œè¿˜èƒ½ç”¨äºæ„å»ºå¼ºå¤§çš„å¼€å‘è€…å·¥å…·ã€‚  ä½œä¸º RESTful API çš„ç«å“ï¼ŒGraphQL"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://powerfooi.github.io/2021/07/23/UseGraphQLElegantly/live.png"><meta property="og:image" content="https://powerfooi.github.io/2021/07/23/UseGraphQLElegantly/codeSection.png"><meta property="article:published_time" content="2021-07-23T05:38:11.000Z"><meta property="article:modified_time" content="2024-04-08T14:14:37.298Z"><meta property="article:author" content="PowerfooI"><meta property="article:tag" content="å‰ç«¯å¼€å‘"><meta property="article:tag" content="GraphQL"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://powerfooi.github.io/2021/07/23/UseGraphQLElegantly/live.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://powerfooi.github.io/2021/07/23/UseGraphQLElegantly/"},"headline":"å¦‚ä½•ç›¸å¯¹ä¼˜é›…åœ°ä½¿ç”¨ GraphQL","image":["https://powerfooi.github.io/2021/07/23/UseGraphQLElegantly/live.png","https://powerfooi.github.io/2021/07/23/UseGraphQLElegantly/codeSection.png"],"datePublished":"2021-07-23T05:38:11.000Z","dateModified":"2024-04-08T14:14:37.298Z","author":{"@type":"Person","name":"PowerfooI"},"publisher":{"@type":"Organization","name":"PowerfooI çš„ä¸ªäººåšå®¢","logo":{"@type":"ImageObject","url":{"text":"Somewhere - PowerfooI's Zone"}}},"description":"å…³äº GraphQLï¼Œå®ƒçš„å®˜ç½‘(éœ€è¦ç§‘å­¦ä¸Šç½‘)æ˜¯è¿™æ ·ä»‹ç»çš„ï¼š  GraphQL æ—¢æ˜¯ä¸€ç§ç”¨äº API çš„æŸ¥è¯¢è¯­è¨€ä¹Ÿæ˜¯ä¸€ä¸ªæ»¡è¶³ä½ æ•°æ®æŸ¥è¯¢çš„è¿è¡Œæ—¶ã€‚ GraphQL å¯¹ä½ çš„ API ä¸­çš„æ•°æ®æä¾›äº†ä¸€å¥—æ˜“äºç†è§£çš„å®Œæ•´æè¿°ï¼Œä½¿å¾—å®¢æˆ·ç«¯èƒ½å¤Ÿå‡†ç¡®åœ°è·å¾—å®ƒéœ€è¦çš„æ•°æ®ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å†—ä½™ï¼Œä¹Ÿè®© API æ›´å®¹æ˜“åœ°éšç€æ—¶é—´æ¨ç§»è€Œæ¼”è¿›ï¼Œè¿˜èƒ½ç”¨äºæ„å»ºå¼ºå¤§çš„å¼€å‘è€…å·¥å…·ã€‚  ä½œä¸º RESTful API çš„ç«å“ï¼ŒGraphQL"}</script><link rel="canonical" href="https://powerfooi.github.io/2021/07/23/UseGraphQLElegantly/"><link rel="alternate" href="/atom.xml" title="PowerfooI çš„ä¸ªäººåšå®¢" type="application/atom+xml"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script><!-- hexo-inject:begin --><!-- hexo-inject:end -->var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?371b1d983749aad213c30979122b6579";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-TNMDKQMTYG" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-TNMDKQMTYG');</script><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.1.1"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Somewhere - PowerfooI&#039;s Zone</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="GitHub" href="https://github.com/PowerfooI"><i class="fab fa-github"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="ç›®å½•" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="æœç´¢" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-07-23T05:38:11.000Z" title="7/23/2021, 1:38:11 PM">2021-07-23</time>å‘è¡¨</span><span class="level-item"><a class="link-muted" href="/categories/%E5%AD%A6%E4%B9%A0/">å­¦ä¹ </a></span><span class="level-item">15 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦2278ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile">å¦‚ä½•ç›¸å¯¹ä¼˜é›…åœ°ä½¿ç”¨ GraphQL</h1><div class="content"><p>å…³äº GraphQLï¼Œå®ƒçš„<a href="https://graphql.org/">å®˜ç½‘</a>(éœ€è¦ç§‘å­¦ä¸Šç½‘)æ˜¯è¿™æ ·ä»‹ç»çš„ï¼š</p>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><blockquote>
<p>GraphQL æ—¢æ˜¯ä¸€ç§ç”¨äº API çš„æŸ¥è¯¢è¯­è¨€ä¹Ÿæ˜¯ä¸€ä¸ªæ»¡è¶³ä½ æ•°æ®æŸ¥è¯¢çš„è¿è¡Œæ—¶ã€‚ GraphQL å¯¹ä½ çš„ API ä¸­çš„æ•°æ®æä¾›äº†ä¸€å¥—æ˜“äºç†è§£çš„å®Œæ•´æè¿°ï¼Œä½¿å¾—å®¢æˆ·ç«¯èƒ½å¤Ÿå‡†ç¡®åœ°è·å¾—å®ƒéœ€è¦çš„æ•°æ®ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å†—ä½™ï¼Œä¹Ÿè®© API æ›´å®¹æ˜“åœ°éšç€æ—¶é—´æ¨ç§»è€Œæ¼”è¿›ï¼Œè¿˜èƒ½ç”¨äºæ„å»ºå¼ºå¤§çš„å¼€å‘è€…å·¥å…·ã€‚</p>
</blockquote>
<p>ä½œä¸º RESTful API çš„ç«å“ï¼ŒGraphQL ä»å¼€æºä¹‹åˆå°±å¤‡å—å…³æ³¨ï¼Œä¸€æ˜¯å› ä¸ºå®ƒæ˜¯ç”± Facebook å¼€æºçš„é¡¹ç›®ï¼ŒäºŒæ˜¯å®ƒ<strong>æŒ‘æˆ˜äº† RESTful API çš„åœ°ä½</strong>ï¼Œè¿™æ˜¯å¾ˆå…³é”®çš„ä¸€ç‚¹ã€‚RESTful API åˆ©ç”¨ URI çš„å…·ä½“å†…å®¹å’Œè¯·æ±‚æ–¹æ³•æ¥åŒºåˆ†è¯·æ±‚çš„èµ„æºæˆ–è€…æ–¹æ³•ï¼Œå…¶ä¸­çš„èµ„æº URI å®¹æ˜“ä¸è·¯ç”±è·¯å¾„äº§ç”Ÿæ··æ·†å’Œé‡å¤ï¼›èµ„æºæ•°é‡è¾¾åˆ°ä¸€å®šçš„æ•°ç›®ä¹‹åï¼Œå¦‚ä½•ç»™èµ„æº URI èµ·åæˆ–è®¸ä¹Ÿæ˜¯ä¸€ä»¶å›°éš¾çš„äº‹æƒ…ã€‚è€Œ GraphQL åˆ™é¼“åŠ±å¼€å‘è€…å°†æ‰€æœ‰éœ€è¦è¯·æ±‚çš„ä¿¡æ¯æ˜¾å¼çš„å†™åœ¨è¯·æ±‚ä½“å½“ä¸­ï¼Œç²¾ç¡®åˆ°å…·ä½“çš„å­—æ®µï¼Œä¸å¤šä¹Ÿä¸å°‘ã€‚</p>
<p>æˆ‘å‚ä¸çš„å‡ ä¸ªé¡¹ç›®éƒ½æ˜¯ç”¨ GraphQL ä½œä¸º API çš„åŸºç¡€ï¼Œæˆ‘æ€»ç»“å‡ºäº†ä¸€ä¸ªåœ¨å‰ç«¯ç›¸å¯¹ä¼˜é›…åœ°ä½¿ç”¨ GraphQL çš„æ–¹æ³•ã€‚è¿™ç¯‡åšå®¢ä¸è®¨è®º GraphQL çš„åŸºæœ¬æ¦‚å¿µï¼Œä¸»è¦ä»‹ç»è¿™ä¸ªæ–¹æ³•ã€‚ï¼ˆä¸ºçœç¯‡å¹…ï¼Œè¿™ç¯‡åšå®¢é‡Œé¢çš„ä»£ç å‡ä¸åšå¼‚å¸¸å¤„ç†ï¼‰</p>
<span id="more"></span>

<h1 id="GraphQL-çš„åŸå§‹ç”¨æ³•"><a href="#GraphQL-çš„åŸå§‹ç”¨æ³•" class="headerlink" title="GraphQL çš„åŸå§‹ç”¨æ³•"></a>GraphQL çš„åŸå§‹ç”¨æ³•</h1><p>GraphQL åœ¨å‰ç«¯çš„è¡¨ç°å…¶å®å¹¶ä¸æ–°å¥‡ï¼šæ ¹æ®å®šä¹‰å¥½çš„ schemaï¼Œå‰ç«¯ç”¨ post è¯·æ±‚å°† query string å’Œå¯é€‰çš„ variables åŒ…è£…åœ¨ body å½“ä¸­ä¼ ç»™åç«¯çš„æŸä¸ªèŠ‚ç‚¹ï¼Œåç«¯æ­£ç¡®å“åº”ä¹‹åä»¥å‰ç«¯æŸ¥è¯¢çš„ç»“æ„å°†æ•°æ®è¿”å›ã€‚</p>
<h2 id="åˆ©ç”¨åŸºç¡€æ–¹æ³•"><a href="#åˆ©ç”¨åŸºç¡€æ–¹æ³•" class="headerlink" title="åˆ©ç”¨åŸºç¡€æ–¹æ³•"></a>åˆ©ç”¨åŸºç¡€æ–¹æ³•</h2><p>é‚£ä¹ˆæ ¹æ®è¿™ä¸ªåŸºç¡€æˆ‘ä»¬å°±èƒ½å¤Ÿæƒ³åˆ°åœ¨ä»£ç ä¸­çš„ç”¨æ³•äº†ï¼Œé¦–å…ˆåœ¨ api.js ä¸­å®šä¹‰ä¸€ä¸ªè¯·æ±‚çš„åŸºç¡€æ–¹æ³•ï¼š</p>
<figure class="highlight javascript"><figcaption><span>api/index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">graphql</span>(<span class="params">q, vars</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> resp = <span class="keyword">await</span> $axios(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="variable constant_">BASE_URL</span> + <span class="string">&#x27;/api/graphql&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">query</span>: q,</span><br><span class="line">      <span class="attr">variables</span>: vars,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="attr">token</span>: <span class="title function_">getYourToken</span>(),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> resp.<span class="property">data</span>.<span class="property">data</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨æ‰€æœ‰éœ€è¦è¯·æ±‚çš„åœ°æ–¹ä½¿ç”¨è¿™ä¸ªåŸºç¡€æ–¹æ³•å°±å¯ä»¥å®Œæˆ graphql çš„è¯·æ±‚ï¼Œå¯ä»¥ç›´æ¥æŠŠè¯·æ±‚å‚æ•°åµŒåœ¨å…·ä½“çš„è¯·æ±‚æ–¹æ³•é‡Œé¢ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ variables çš„æ–¹æ³•ï¼ˆä½†è¿™æ ·ä¼šéœ€è¦åœ¨å­—ç¬¦ä¸²ä¸­å¤šå†™äº›å˜é‡å®šä¹‰ï¼‰ã€‚</p>
<figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; graphql &#125; <span class="keyword">from</span> <span class="string">&#x27;./api&#x27;</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getPerson1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> resp = <span class="keyword">await</span> <span class="title function_">graphql</span>(</span><br><span class="line">    <span class="string">`query &#123;</span></span><br><span class="line"><span class="string">      person(id: <span class="subst">$&#123;id&#125;</span>) &#123;</span></span><br><span class="line"><span class="string">        id name address </span></span><br><span class="line"><span class="string">        age gender mobile</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;`</span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getPerson2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> resp = <span class="keyword">await</span> <span class="title function_">graphql</span>(</span><br><span class="line">    <span class="string">`query ($id: ID!) &#123;</span></span><br><span class="line"><span class="string">        person(id: $id) &#123;</span></span><br><span class="line"><span class="string">          id name address </span></span><br><span class="line"><span class="string">          age gender mobile</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;`</span>,</span><br><span class="line">    &#123; id &#125;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä½“éªŒç³Ÿç³•çš„æŸ¥è¯¢å­—ç¬¦ä¸²"><a href="#ä½“éªŒç³Ÿç³•çš„æŸ¥è¯¢å­—ç¬¦ä¸²" class="headerlink" title="ä½“éªŒç³Ÿç³•çš„æŸ¥è¯¢å­—ç¬¦ä¸²"></a>ä½“éªŒç³Ÿç³•çš„æŸ¥è¯¢å­—ç¬¦ä¸²</h2><p>æˆ–è®¸ä½ è§‰å¾—ä¸Šé¢çš„æ–¹æ³•è¿˜å¯ä»¥æ¥å—ï¼Œä½†æ˜¯å¦‚æœå˜é‡ä¸­å­˜åœ¨æ•°ç»„ã€æšä¸¾å€¼å’Œå¸ƒå°”å€¼æ—¶ï¼Œç›´æ¥åœ¨ query string ä¸­æ’å…¥å˜é‡çš„ä½“éªŒå°±ä¼šå˜çš„å¾ˆç³Ÿç³•ã€‚åƒä¸‹é¢è¿™æ ·ï¼Œæˆ‘è¿™è¾ˆå­éƒ½ä¸å†æƒ³è§åˆ°è¿™æ ·çš„å†™æ³•ã€‚</p>
<figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">heyGuys</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> guys = [<span class="string">&#x27;alice&#x27;</span>, <span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;carol&#x27;</span>, <span class="string">&#x27;dave&#x27;</span>]</span><br><span class="line">  <span class="keyword">const</span> resp = <span class="keyword">await</span> <span class="title function_">graphql</span>(<span class="string">`</span></span><br><span class="line"><span class="string">    query &#123;</span></span><br><span class="line"><span class="string">      heyGuys(guys: [<span class="subst">$&#123;guys.map((n) =&gt; <span class="string">&#x27;&quot;&#x27;</span> + n + <span class="string">&#x27;&quot;&#x27;</span>).join(<span class="string">&#x27;,&#x27;</span>)&#125;</span>])</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  `</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç»Ÿä¸€ç®¡ç†æŸ¥è¯¢å­—ç¬¦ä¸²"><a href="#ç»Ÿä¸€ç®¡ç†æŸ¥è¯¢å­—ç¬¦ä¸²" class="headerlink" title="ç»Ÿä¸€ç®¡ç†æŸ¥è¯¢å­—ç¬¦ä¸²"></a>ç»Ÿä¸€ç®¡ç†æŸ¥è¯¢å­—ç¬¦ä¸²</h2><p>åœ¨é€»è¾‘ä»£ç ä¸­å†™å¤§é‡çš„ query string ä¸å¤ªåˆ©äºç»´æŠ¤ï¼Œä¸ºæ­¤å¯ä»¥å°†æ‰€æœ‰å­—ç¬¦ä¸²åˆ†ç±»æ•´ç†å¥½ç»Ÿä¸€ç®¡ç†ã€‚ä¾‹å¦‚æ”¾åœ¨æŸä¸ª <code>documents.js</code> æ–‡ä»¶å†…ï¼Œå…¶ä»–åœ°æ–¹éœ€è¦è¯·æ±‚çš„æ—¶å€™ç›´æ¥ä»è¯¥æ–‡ä»¶å¯¼å…¥å³å¯ã€‚è¿™æ ·å¯ä»¥åœ¨çœŸæ­£çš„ä¸šåŠ¡é€»è¾‘ä¸­é¿å…å¤§é‡çš„å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight javascript"><figcaption><span>api/documents.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getPersonDoc = <span class="string">`</span></span><br><span class="line"><span class="string">  query ($id: ID!) &#123;</span></span><br><span class="line"><span class="string">    person(id: $id) &#123;</span></span><br><span class="line"><span class="string">      id name address </span></span><br><span class="line"><span class="string">      age gender mobile</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;`</span></span><br></pre></td></tr></table></figure>

<h2 id="é—®é¢˜ä»ç„¶å­˜åœ¨"><a href="#é—®é¢˜ä»ç„¶å­˜åœ¨" class="headerlink" title="é—®é¢˜ä»ç„¶å­˜åœ¨"></a>é—®é¢˜ä»ç„¶å­˜åœ¨</h2><p>ä¸Šé¢ç»Ÿä¸€ç®¡ç†æŸ¥è¯¢å­—ç¬¦ä¸²çš„ä½“éªŒè¿˜å‡‘åˆï¼Œä½†æ˜¯çœŸæ­£å¼€å‘èµ·æ¥å°±ä¼šå‘ç°æœ‰ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ç»•ä¸å¼€ï¼š</p>
<ol>
<li>æˆ‘å¦‚ä½•çŸ¥é“ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹åº”çš„å˜é‡åº”è¯¥æ˜¯ä»€ä¹ˆï¼Ÿåªèƒ½æŸ¥çœ‹å­—ç¬¦ä¸²æœ¬èº«çš„å®šä¹‰ï¼›</li>
<li>æˆ‘å†™å­—ç¬¦ä¸²çš„æ—¶å€™å¦‚ä½•è·å¾—ä»£ç æç¤ºå‘¢ï¼Ÿè¿˜æ˜¯è¯´æˆ‘åªèƒ½å¯¹ç€åç«¯çš„ schema é€å­—æ®µæ…¢æ…¢å†™å‘¢ï¼Ÿ</li>
<li>æ—¢ç„¶éƒ½ç»Ÿä¸€ç®¡ç†äº†æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæ˜¯ä¸æ˜¯è¿˜å¾—å†å°è£…ä¸€å±‚æŸ¥è¯¢æ–¹æ³•å‘¢ï¼Ÿè¿™æ ·ä¸šåŠ¡é€»è¾‘å¤„çš„ä»£ç è¿˜èƒ½æ›´çœã€‚</li>
<li>å¦‚æœéƒ½ç”¨å­—ç¬¦ä¸²å¦‚ä½•ä½¿ç”¨ Fragment å‘¢ï¼Ÿï¼ˆæˆ–è®¸å¯ä»¥çœ‹ä¸€ä¸‹ <a href="https://github.com/apollographql/graphql-tag">graphql-tag</a>ï¼‰</li>
</ol>
<h1 id="æ›´å¥½çš„æ–¹æ³•ï¼šä»£ç ç”Ÿæˆ"><a href="#æ›´å¥½çš„æ–¹æ³•ï¼šä»£ç ç”Ÿæˆ" class="headerlink" title="æ›´å¥½çš„æ–¹æ³•ï¼šä»£ç ç”Ÿæˆ"></a>æ›´å¥½çš„æ–¹æ³•ï¼šä»£ç ç”Ÿæˆ</h1><p>å¦‚æœå®Œæˆä¸€ä¸ªè¯·æ±‚éœ€è¦å…ˆå†™æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œå†å°è£…ä¸€ä¸ªå…³äºè¿™ä¸ªæŸ¥è¯¢å­—ç¬¦ä¸²çš„è¯·æ±‚æ–¹æ³•ï¼Œå¼€å‘æ•ˆç‡ä¸ä¼šå¾ˆé«˜ã€‚å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„ä»£ç å¾ˆå¤šéƒ½æ˜¯çç¢ä¸”å¹³å‡¡çš„ï¼Œæ—¢ç„¶å¦‚æ­¤ï¼Œå¯ä»¥å°è¯•ç”Ÿæˆä»£ç ã€‚ä¸ºæ­¤æˆ‘ä»¬éœ€è¦äº†è§£ä»¥ä¸‹çš„åŒ…æˆ–è€…æ’ä»¶ï¼š</p>
<ol>
<li><code>@graphql-codegen</code>: <a href="https://www.graphql-code-generator.com/">graphql ä»£ç ç”Ÿæˆå™¨</a>ï¼Œä¸€ä¸ª npm åŒ…ã€‚é€šè¿‡å®šä¹‰çš„ schema å’Œ operation ç”ŸæˆåŒ…å«è¯·æ±‚æ–¹æ³•çš„ typescript æ–‡ä»¶ï¼›</li>
<li><code>GraphQL</code>: vscode æ’ä»¶ï¼Œç”¨ä½œå†™ <code>.graphql</code> æ–‡ä»¶æ—¶çš„è‡ªåŠ¨è¡¥å…¨ï¼›</li>
</ol>
<h2 id="é…ç½®-graphql-codegen"><a href="#é…ç½®-graphql-codegen" class="headerlink" title="é…ç½® @graphql-codegen"></a>é…ç½® @graphql-codegen</h2><p>æŒ‰ç…§è¯¥åŒ…å®˜æ–¹æ–‡æ¡£çš„æŒ‡ç¤ºè¿›è¡Œå®‰è£…é…ç½®å³å¯ï¼Œä¸éœ€è¦å¤ªå¤šçš„é…ç½®ã€‚å…¶å®˜ç½‘ä¸Šè¿˜æœ‰ä¸‹å›¾æ‰€ç¤ºçš„ live exampleï¼Œéå¸¸å®¹æ˜“å¼„æ‡‚ã€‚</p>
<img src="/2021/07/23/UseGraphQLElegantly/live.png" class="" title="@graphql-codegen å®˜ç½‘çš„ live example">

<p>æˆ‘åœ¨å¼€å‘ä¸­ä¸€èˆ¬ä¼šé…ç½®ä¸¤ä¸ªä»£ç ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œä¸€ä¸ªç”¨äºåŒæ­¥åç«¯ã€ç”Ÿæˆä»£ç è¡¥å…¨æ‰€ä¾èµ–çš„ schema æ–‡ä»¶ï¼Œä¸€ä¸ªç”¨äºç”Ÿæˆ operation å¯¹åº”çš„è¯·æ±‚æ–¹æ³•ã€‚å¦‚ä¸‹æ˜¯ä¸¤ä¸ªé…ç½®æ–‡ä»¶çš„å¤§è‡´å†…å®¹ã€‚</p>
<figure class="highlight yml"><figcaption><span>schema.codegen.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">generates:</span></span><br><span class="line">  <span class="string">./graphql/schema.graphql:</span></span><br><span class="line">    <span class="attr">schema:</span> <span class="string">&#x27;BASE_URL/api/graphql&#x27;</span></span><br><span class="line">    <span class="attr">plugins:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">schema-ast</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><figcaption><span>operation.codegen.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">generates:</span> </span><br><span class="line">  <span class="string">./api/demo.ts:</span></span><br><span class="line">  <span class="attr">documents:</span> <span class="string">&#x27;./graphql/operations.graphql&#x27;</span></span><br><span class="line">  <span class="attr">schema:</span> <span class="string">&#x27;BASE_URL/api/graphql&#x27;</span> <span class="comment"># æˆ–è€…ç›´æ¥ä½¿ç”¨ &#x27;./graphql/schema.graphql&#x27;</span></span><br><span class="line">  <span class="attr">plugins:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">typescript</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">typescript-operations</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">typescript-graphql-request</span></span><br></pre></td></tr></table></figure>

<p>é…ç½®æ–‡ä»¶ä¸­çš„ <code>plugins</code> é…ç½®é¡¹æ˜¯å…³é”®ã€‚<code>schema.codegen.yml</code> ä¸­çš„ <code>schema-ast</code> æ˜¯ç”Ÿæˆ schema çš„ graphql æ–‡ä»¶ï¼›<code>operation.codegen.yml</code> ä¸­çš„ <code>typescript-*</code> åˆ™æ˜¯ç”Ÿæˆè¯·æ±‚æ–¹æ³•æ‰€ä¾èµ–çš„æ’ä»¶ã€‚æˆ‘è¿™é‡Œç»™å‡ºçš„æ˜¯ä½¿ç”¨ <a href="https://github.com/prisma-labs/graphql-request">graphql-request</a> çš„ä¾‹å­ï¼Œ<code>graphql-request</code> æ˜¯ä¸€ä¸ªè½»é‡ã€ç®€æ´ï¼Œæ”¯æŒ ts å’Œ promise-based API çš„ GraphQL å®¢æˆ·ç«¯ï¼Œåœ¨å‰åç«¯éƒ½èƒ½ä½¿ç”¨ã€‚</p>
<p>ç”Ÿæˆè¯·æ±‚æ–¹æ³•æ‰€ä¾èµ–çš„æ’ä»¶æ ¹æ®é¡¹ç›®ç‰¹ç‚¹é€‰å®šï¼Œä¾‹å¦‚ <code>graphql-request</code> è¿™ä¸ªæ’ä»¶æˆ‘ç”¨åœ¨ Vue2.x çš„é¡¹ç›®å½“ä¸­ï¼Œè€Œåœ¨ React çš„é¡¹ç›®ä¸­æˆ‘æ˜¯ç”¨çš„æ’ä»¶æ˜¯ <code>React-Query Hooks</code>ã€‚æ¯ä¸ªæ’ä»¶å¯¹åº”çš„åŸºç¡€åº“çš„ç‰¹ç‚¹ä¸ä¸€æ ·ï¼Œç”Ÿæˆçš„ä»£ç é£æ ¼ä¹Ÿä¸å°½ç›¸åŒï¼Œæ ¹æ®éœ€è¦çµæ´»é€‰æ‹©å³å¯ã€‚</p>
<h2 id="ç¼–å†™-operations"><a href="#ç¼–å†™-operations" class="headerlink" title="ç¼–å†™ operations"></a>ç¼–å†™ operations</h2><p>operations é¡¾åæ€ä¹‰å°±æ˜¯æ“ä½œï¼Œåœ¨ GraphQL é‡Œé¢æ“ä½œåˆ†ä¸º <code>query</code> å’Œ <code>mutation</code>ï¼Œç¼–å†™å…·åæ“ä½œä¼šè¢« <code>@graphql-codegen</code> è½¬æ¢æˆä¸ºè¯·æ±‚æ–¹æ³•ã€‚ä¸‹é¢ç»™ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><figcaption><span>schema.graphql</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">enum Gender &#123;</span><br><span class="line">  Female</span><br><span class="line">  Male</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Person &#123;</span><br><span class="line">  id: ID!</span><br><span class="line">  name: String!</span><br><span class="line">  address: String!</span><br><span class="line">  age: Int!</span><br><span class="line">  gender: Gender!</span><br><span class="line">  mobile: String!</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Query &#123;</span><br><span class="line">  persons: [Person!]!</span><br><span class="line">  person(id: ID!): Person</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Mutation &#123;</span><br><span class="line">  setPersonGender(id: ID!, gender: Gender!): Boolean</span><br><span class="line">  greet(id: ID!): String!</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>operations.graphql</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">query getPersons &#123;</span><br><span class="line">  persons &#123;</span><br><span class="line">    id name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">query getPerson($id: ID!) &#123;</span><br><span class="line">  person(id: $id) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    address</span><br><span class="line">    age</span><br><span class="line">    gender</span><br><span class="line">    mobile</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mutation sayHello($id: ID!) &#123;</span><br><span class="line">  greet(id: $id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºç”¨äº† vscode çš„æ’ä»¶ <code>GraphQL</code>ï¼Œæ‰€ä»¥åœ¨å†™ operations çš„æ—¶å€™å…¶å®æ˜¯æœ‰ä»£ç è¡¥å…¨çš„ï¼Œå¼€å‘ä½“éªŒæ¯”è¾ƒå¥½ï¼Œä¸‹å›¾æ˜¯åœ¨ vscode ä¸Šçš„ä»£ç è¡¥å…¨ï¼Œåœ¨ jetBrains çš„ IDE ä¸Šé¢çš„ä»£ç è‡ªåŠ¨è¡¥å…¨åº”è¯¥ä¼šæ›´å®Œå–„ã€‚</p>
<img src="/2021/07/23/UseGraphQLElegantly/codeSection.png" class="" title="å†™ .graphql æ–‡ä»¶æ—¶çš„ä»£ç è¡¥å…¨">

<h2 id="ç”Ÿæˆ-typescript-ä»£ç "><a href="#ç”Ÿæˆ-typescript-ä»£ç " class="headerlink" title="ç”Ÿæˆ typescript ä»£ç "></a>ç”Ÿæˆ typescript ä»£ç </h2><p>å†™å®Œä¸Šé¢çš„ schema å’Œ operations ä¹‹åï¼Œè¿è¡Œ <code>graphql-codegen --config operations.codegen.yml</code> å³åœ¨ <code>./api</code> ç›®å½•ä¸‹å¯ç”Ÿæˆä¸€ä¸ª <code>demo.ts</code> æ–‡ä»¶ã€‚å…¶ä¸­åŒ…å«äº†ä¸‹é¢è¿™æ ·çš„ä»£ç ï¼š</p>
<figure class="highlight typescript"><figcaption><span>api/demo.ts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ... çœç•¥äº†å¾ˆå¤š</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">defaultWrapper</span>: <span class="title class_">SdkFunctionWrapper</span> = <span class="function">(<span class="params">action, _operationName</span>) =&gt;</span> <span class="title function_">action</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getSdk</span>(<span class="params">client: GraphQLClient, withWrapper: SdkFunctionWrapper = defaultWrapper</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="title function_">getPersons</span>(variables?: <span class="title class_">GetPersonsQueryVariables</span>, requestHeaders?: <span class="title class_">Dom</span>.<span class="property">RequestInit</span>[<span class="string">&quot;headers&quot;</span>]): <span class="title class_">Promise</span>&lt;<span class="title class_">GetPersonsQuery</span>&gt; &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">withWrapper</span>(<span class="function">(<span class="params">wrappedRequestHeaders</span>) =&gt;</span> client.<span class="property">request</span>&lt;<span class="title class_">GetPersonsQuery</span>&gt;(<span class="title class_">GetPersonsDocument</span>, variables, &#123;...requestHeaders, ...wrappedRequestHeaders&#125;), <span class="string">&#x27;getPersons&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">getPerson</span>(<span class="attr">variables</span>: <span class="title class_">GetPersonQueryVariables</span>, requestHeaders?: <span class="title class_">Dom</span>.<span class="property">RequestInit</span>[<span class="string">&quot;headers&quot;</span>]): <span class="title class_">Promise</span>&lt;<span class="title class_">GetPersonQuery</span>&gt; &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">withWrapper</span>(<span class="function">(<span class="params">wrappedRequestHeaders</span>) =&gt;</span> client.<span class="property">request</span>&lt;<span class="title class_">GetPersonQuery</span>&gt;(<span class="title class_">GetPersonDocument</span>, variables, &#123;...requestHeaders, ...wrappedRequestHeaders&#125;), <span class="string">&#x27;getPerson&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">sayHello</span>(<span class="attr">variables</span>: <span class="title class_">SayHelloMutationVariables</span>, requestHeaders?: <span class="title class_">Dom</span>.<span class="property">RequestInit</span>[<span class="string">&quot;headers&quot;</span>]): <span class="title class_">Promise</span>&lt;<span class="title class_">SayHelloMutation</span>&gt; &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">withWrapper</span>(<span class="function">(<span class="params">wrappedRequestHeaders</span>) =&gt;</span> client.<span class="property">request</span>&lt;<span class="title class_">SayHelloMutation</span>&gt;(<span class="title class_">SayHelloDocument</span>, variables, &#123;...requestHeaders, ...wrappedRequestHeaders&#125;), <span class="string">&#x27;sayHello&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">Sdk</span> = <span class="title class_">ReturnType</span>&lt;<span class="keyword">typeof</span> getSdk&gt;;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ° <code>getSdk</code> è¿™ä¸ªå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«äº†åˆšåˆšåœ¨åœ¨ <code>operations.graphql</code> ä¸­å®šä¹‰çš„å‡ ä¸ªæ“ä½œã€‚è¿™æ ·å°±ä»ç±»å‹ä¸Šé”å®šäº†è¿™ä¸ªæ–¹æ³•çš„åå­—ã€å‚æ•°ä»¥åŠè¿”å›å€¼ã€‚è¿™å¯¹äºé¡¹ç›®ç»´æŠ¤å’Œå¼€å‘æ¥è¯´æ— ç–‘éƒ½æ˜¯åˆ©å¥½çš„ã€‚</p>
<h2 id="ä½¿ç”¨ç”Ÿæˆçš„ä»£ç "><a href="#ä½¿ç”¨ç”Ÿæˆçš„ä»£ç " class="headerlink" title="ä½¿ç”¨ç”Ÿæˆçš„ä»£ç "></a>ä½¿ç”¨ç”Ÿæˆçš„ä»£ç </h2><p>å› ä¸ºçœŸæ­£ä½¿ç”¨çš„è¯·æ±‚æ–¹æ³•è‚¯å®šæ˜¯è¦é‰´æƒçš„ï¼Œæˆ‘ä»¬éœ€è¦å†è°ƒæ•´ä¸€ä¸‹ç”Ÿæˆçš„ä»£ç ï¼Œçœ‹åˆ°ä¸Šé¢ <code>demo.ts</code> ä¸­çš„ <code>defaultWrapper</code> å‡½æ•°äº†å—ï¼Ÿæˆ‘ä»¬åªéœ€è¦åœ¨è°ƒç”¨ <code>getSdk</code> æ—¶ä¼ å…¥è‡ªå®šä¹‰çš„ Wrapper å³å¯ã€‚ä¸‹é¢ç»™ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight typescript"><figcaption><span>api/index.ts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getSdk <span class="keyword">as</span> getDemoSdk &#125; <span class="keyword">from</span> <span class="string">&#x27;./demo&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getClientOptions</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> apiWrapper = <span class="keyword">async</span> &lt;T&gt;<span class="function">(<span class="params">action: (headers?: Record&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;) =&gt; <span class="built_in">Promise</span>&lt;T&gt;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> headers = &#123; <span class="string">&#x27;token&#x27;</span>: <span class="title function_">getYourToken</span>() &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> <span class="title function_">action</span>(headers)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> demoClient = <span class="title function_">getDemoSdk</span>(<span class="keyword">new</span> <span class="title class_">GraphQLClient</span>(<span class="string">&#x27;/api/graphql&#x27;</span>, <span class="title function_">getClientOptions</span>()), apiWrapper)</span><br></pre></td></tr></table></figure>

<p>åœ¨éœ€è¦ç”¨åˆ°çš„åœ°æ–¹åªéœ€è¦å¯¼å…¥ <code>demoClient</code> å³å¯ï¼Œæˆ‘ä»¬å†ç”¨å‡ è¡Œä»£ç é‡å†™ä¸€éä¸Šé¢çš„ <code>getPerson</code> å‡½æ•°ï¼š</p>
<figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; demoClient &#125; <span class="keyword">from</span> <span class="string">&#x27;./api&#x27;</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getPerson3</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> resp = <span class="keyword">await</span> demoClient.<span class="title function_">getPerson</span>(&#123; id &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div><div class="article-licensing box"><div class="licensing-title"><p>å¦‚ä½•ç›¸å¯¹ä¼˜é›…åœ°ä½¿ç”¨ GraphQL</p><p><a href="https://powerfooi.github.io/2021/07/23/UseGraphQLElegantly/">https://powerfooi.github.io/2021/07/23/UseGraphQLElegantly/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>ä½œè€…</h6><p>PowerfooI</p></div></div><div class="level-item is-narrow"><div><h6>å‘å¸ƒäº</h6><p>2021-07-23</p></div></div><div class="level-item is-narrow"><div><h6>æ›´æ–°äº</h6><p>2024-04-08</p></div></div><div class="level-item is-narrow"><div><h6>è®¸å¯åè®®</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">å‰ç«¯å¼€å‘</a><a class="link-muted mr-2" rel="tag" href="/tags/GraphQL/">GraphQL</a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=660fc46b8643100019977f2b&amp;product=inline-share-buttons&amp;source=platform" defer></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/08/15/NginxBasics-1/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Nginx åŸºç¡€</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/07/20/TheThirdMiniprogramCompetition/"><span class="level-item">è®°2021å¹´å°ç¨‹åºå¤§èµ›</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">è¯„è®º</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "94eab9bb465c0b4a4dddb3389710286e",
            repo: "powerfooI.github.io",
            owner: "powerfooI",
            clientID: "de634a427346094182ce",
            clientSecret: "977edb8eca9693667f47bdbb9ab33c9739f1c494",
            admin: ["powerfooI"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 20,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            language: "zh-CN",
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/logo.png" alt="PowerfooI"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">PowerfooI</p><p class="is-size-6 is-block">ç å†œï¼ŒåŠªåŠ›æˆä¸ºè½¯ä»¶å·¥ç¨‹å¸ˆ</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>æµ™æ±Ÿæ­å·</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ–‡ç« </p><a href="/archives"><p class="title">29</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">åˆ†ç±»</p><a href="/categories"><p class="title">3</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ ‡ç­¾</p><a href="/tags"><p class="title">28</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/PowerfooI" target="_blank" rel="noopener">å…³æ³¨æˆ‘</a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">ç›®å½•</h3><ul class="menu-list"><li><a class="level is-mobile" href="#GraphQL-çš„åŸå§‹ç”¨æ³•"><span class="level-left"><span class="level-item">1</span><span class="level-item">GraphQL çš„åŸå§‹ç”¨æ³•</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#åˆ©ç”¨åŸºç¡€æ–¹æ³•"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">åˆ©ç”¨åŸºç¡€æ–¹æ³•</span></span></a></li><li><a class="level is-mobile" href="#ä½“éªŒç³Ÿç³•çš„æŸ¥è¯¢å­—ç¬¦ä¸²"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">ä½“éªŒç³Ÿç³•çš„æŸ¥è¯¢å­—ç¬¦ä¸²</span></span></a></li><li><a class="level is-mobile" href="#ç»Ÿä¸€ç®¡ç†æŸ¥è¯¢å­—ç¬¦ä¸²"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">ç»Ÿä¸€ç®¡ç†æŸ¥è¯¢å­—ç¬¦ä¸²</span></span></a></li><li><a class="level is-mobile" href="#é—®é¢˜ä»ç„¶å­˜åœ¨"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">é—®é¢˜ä»ç„¶å­˜åœ¨</span></span></a></li></ul></li><li><a class="level is-mobile" href="#æ›´å¥½çš„æ–¹æ³•ï¼šä»£ç ç”Ÿæˆ"><span class="level-left"><span class="level-item">2</span><span class="level-item">æ›´å¥½çš„æ–¹æ³•ï¼šä»£ç ç”Ÿæˆ</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#é…ç½®-graphql-codegen"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">é…ç½® @graphql-codegen</span></span></a></li><li><a class="level is-mobile" href="#ç¼–å†™-operations"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">ç¼–å†™ operations</span></span></a></li><li><a class="level is-mobile" href="#ç”Ÿæˆ-typescript-ä»£ç "><span class="level-left"><span class="level-item">2.3</span><span class="level-item">ç”Ÿæˆ typescript ä»£ç </span></span></a></li><li><a class="level is-mobile" href="#ä½¿ç”¨ç”Ÿæˆçš„ä»£ç "><span class="level-left"><span class="level-item">2.4</span><span class="level-item">ä½¿ç”¨ç”Ÿæˆçš„ä»£ç </span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">åˆ†ç±»</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">å­¦ä¹ </span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%B8%B8%E8%AE%B0/"><span class="level-start"><span class="level-item">æ¸¸è®°</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%9A%8F%E7%AC%94/"><span class="level-start"><span class="level-item">éšç¬”</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">æœ€æ–°æ–‡ç« </h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-07-27T15:52:22.000Z">2024-07-27</time></p><p class="title"><a href="/2024/07/27/TypeGymnastics/">ä¸€èµ·æ¥åšç±»å‹ä½“æ“å§ï¼ğŸ˜Š</a></p><p class="categories"><a href="/categories/%E5%AD%A6%E4%B9%A0/">å­¦ä¹ </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-06-22T15:48:27.000Z">2024-06-22</time></p><p class="title"><a href="/2024/06/22/RFTP-2/">rFTP - ç”¨ Rust å®ç°ç®€å•çš„ FTP Server (2)</a></p><p class="categories"><a href="/categories/%E5%AD%A6%E4%B9%A0/">å­¦ä¹ </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-05-19T13:54:57.000Z">2024-05-19</time></p><p class="title"><a href="/2024/05/19/RunAppSafelyInK8s/">åœ¨ Kubernetes ä¸­å®‰å…¨åœ°è¿è¡Œåº”ç”¨</a></p><p class="categories"><a href="/categories/%E5%AD%A6%E4%B9%A0/">å­¦ä¹ </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-02-27T15:46:17.000Z">2024-02-27</time></p><p class="title"><a href="/2024/02/27/YetAnotherImporter-VSCode/">VSCode æ’ä»¶ - YAI</a></p><p class="categories"><a href="/categories/%E5%AD%A6%E4%B9%A0/">å­¦ä¹ </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-02-03T13:56:52.000Z">2024-02-03</time></p><p class="title"><a href="/2024/02/03/ReadSourceOfControllerRuntime/">Controller-runtime æºç é˜…è¯»</a></p><p class="categories"><a href="/categories/%E5%AD%A6%E4%B9%A0/">å­¦ä¹ </a></p></div></article></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">æ ‡ç­¾</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/CI-CD/"><span class="tag">CI/CD</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docs/"><span class="tag">Docs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Github/"><span class="tag">Github</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GraphQL/"><span class="tag">GraphQL</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/K8s/"><span class="tag">K8s</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Misc/"><span class="tag">Misc</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NPM/"><span class="tag">NPM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Nginx/"><span class="tag">Nginx</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/React/"><span class="tag">React</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Rust/"><span class="tag">Rust</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Storage/"><span class="tag">Storage</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TypeScript/"><span class="tag">TypeScript</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VSCode/"><span class="tag">VSCode</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vue/"><span class="tag">Vue</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"><span class="tag">å‰ç«¯å¼€å‘</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"><span class="tag">åç«¯å¼€å‘</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AE%89%E5%85%A8/"><span class="tag">å®‰å…¨</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"><span class="tag">å°ç¨‹åº</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%91%84%E5%BD%B1/"><span class="tag">æ‘„å½±</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB/"><span class="tag">æ–‡æ¡£é˜…è¯»</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%97%85%E6%B8%B8/"><span class="tag">æ—…æ¸¸</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/"><span class="tag">æºç é˜…è¯»</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BD%91%E7%BB%9C/"><span class="tag">ç½‘ç»œ</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%83%A1%E6%80%9D%E4%B9%B1%E6%83%B3/"><span class="tag">èƒ¡æ€ä¹±æƒ³</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/"><span class="tag">è®ºæ–‡é˜…è¯»</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/"><span class="tag">è®¿é—®æ§åˆ¶</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AF%BB%E5%90%8E%E6%84%9F/"><span class="tag">è¯»åæ„Ÿ</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%83%A8%E7%BD%B2/"><span class="tag">éƒ¨ç½²</span><span class="tag">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Somewhere - PowerfooI&#039;s Zone</a><p class="is-size-7"><span>&copy; 2024 PowerfooI</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Visit GitHub Profile" href="https://github.com/powerfooi/"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="å›åˆ°é¡¶ç«¯" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "æ­¤ç½‘ç«™ä½¿ç”¨Cookieæ¥æ”¹å–„æ‚¨çš„ä½“éªŒã€‚",
          dismiss: "çŸ¥é“äº†ï¼",
          allow: "å…è®¸ä½¿ç”¨Cookie",
          deny: "æ‹’ç»",
          link: "äº†è§£æ›´å¤š",
          policy: "Cookieæ”¿ç­–",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...","untitled":"(æ— æ ‡é¢˜)","posts":"æ–‡ç« ","pages":"é¡µé¢","categories":"åˆ†ç±»","tags":"æ ‡ç­¾"});
        });</script><!-- hexo-inject:begin --><!-- hexo-inject:end --></body></html>